<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/popup.js/1.0.0/popup.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {
            max-width: 800px;
            margin: auto;
            padding: 2rem;
            font-family: Libre Baskerville, Georgia, serif;
        }
        .dark-mode {
            background-color: black;
            color: white;
        }
        /* Button styles for the theme toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 24px; /* Bigger size for better visibility */
        }
        .popup {
            padding: 20px;
            text-align: center;
        }
        .popup button {
            margin: 10px;
            padding: 10px 20px;
            border: none;
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }
        .popup button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body class="markdown-body">
    <div>
        {{ content }}
    </div>

    <button class="theme-toggle" id="theme-toggle">
        <img src="https://img.icons8.com/ios-filled/50/000000/sun.png" alt="Light Mode" id="light-icon" style="display:none;">
        <img src="https://img.icons8.com/ios-filled/50/000000/moon-symbol.png" alt="Dark Mode" id="dark-icon">
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popup.js/1.0.0/popup.min.js"></script>
    <script>
        const popupShownKey = 'popupShown';
        const popupShown = localStorage.getItem(popupShownKey);

        // Show popup after 1.5 minutes if not already shown
        if (!popupShown) {
            setTimeout(showPopup, 90 * 1000); // 1.5 minutes
            localStorage.setItem(popupShownKey, 'true');
        }

        function showPopup() {
            const popup = new Popup({
                title: 'Options',
                content: `
                    <div class="popup">
                        <p>What would you like to do?</p>
                        <button onclick="downloadResume()">Download Resume</button>
                        <button onclick="contactMe()">Contact Me</button>
                    </div>
                `,
                buttons: [],
                closeOnClick: false
            });
            popup.show();
        }

        function downloadResume() {
            window.open('https://your-repository-url.com/your-resume.pdf', '_blank');
        }

        function contactMe() {
            window.open('mailto:your-email@example.com');
        }

        // Theme toggle logic
        const themeToggleBtn = document.getElementById('theme-toggle');
        const lightIcon = document.getElementById('light-icon');
        const darkIcon = document.getElementById('dark-icon');

        themeToggleBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            if (document.body.classList.contains('dark-mode')) {
                darkIcon.style.display = 'none';
                lightIcon.style.display = 'inline';
            } else {
                lightIcon.style.display = 'none';
                darkIcon.style.display = 'inline';
            }
        });
    </script>
</body>
</html>
