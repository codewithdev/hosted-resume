<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {
            max-width: 800px;
            margin: auto;
            padding: 2rem;
            font-family: Libre Baskerville, Georgia, serif;
        }
        .dark-mode {
            background-color: black;
            color: white;
        }
        .theme-toggle {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 10px;
            transition: transform 0.3s ease;
        }
        .theme-icon {
            width: 40px;  /* Adjust size as needed */
            height: 40px; /* Adjust size as needed */
            fill: grey;   /* Icon color */
        }
        /* Popup styling */
        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border: 2px solid #ccc;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        .popup h2 {
            margin-top: 0;
        }
        .popup button {
            margin-right: 10px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #007BFF;
            color: white;
        }
    </style>
</head>
<body class="markdown-body">
    <div>
        {{ content }}
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" onclick="toggleTheme()">
        <svg class="theme-icon" id="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="5" />
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
        </svg>
        <svg class="theme-icon" id="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="display:none;">
            <path d="M12 3c-1.656 0-3 1.344-3 3s1.344 3 3 3c1.656 0 3-1.344 3-3s-1.344-3-3-3zm0 14c-2.209 0-4-1.791-4-4 0-1.933 1.434-3.536 3.286-3.872C12.762 10.473 15 12.392 15 15c0 2.209-1.791 4-4 4zm-2 0H4c-1.104 0-2-.896-2-2 0-1.104.896-2 2-2h6c.552 0 1 .448 1 1s-.448 1-1 1H4c-.552 0-1 .448-1 1s.448 1 1 1h6zm12-8h-2c-1.104 0-2-.896-2-2s.896-2 2-2h2c1.104 0 2 .896 2 2s-.896 2-2 2zM18 7h2c.552 0 1 .448 1 1s-.448 1-1 1h-2c-.552 0-1-.448-1-1s.448-1 1-1zm0 10h2c.552 0 1 .448 1 1s-.448 1-1 1h-2c-.552 0-1-.448-1-1s.448-1 1-1z"/>
        </svg>
    </button>

    <!-- Popup for Resume Download -->
    <div id="resumePopup" class="popup">
        <h2>Would you like to download the resume or contact me?</h2>
        <button id="downloadBtn">Download Resume</button>
        <button id="contactBtn">Contact Me</button>
        <button onclick="closePopup()">Close</button>
    </div>

    <script>
        // Function to toggle theme
        function toggleTheme() {
            const body = document.body;
            body.classList.toggle("dark-mode");

            // Toggle icons
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            sunIcon.style.display = sunIcon.style.display === "none" ? "inline" : "none";
            moonIcon.style.display = moonIcon.style.display === "none" ? "inline" : "none";

            // Save theme preference in localStorage
            if (body.classList.contains("dark-mode")) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        }

        // Load saved theme preference
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add("dark-mode");
                document.getElementById('sun-icon').style.display = "none";
                document.getElementById('moon-icon').style.display = "inline";
            }
        });

        // Popup functionality
        function showPopup() {
            document.getElementById('resumePopup').style.display = 'block';
        }

        function closePopup() {
            document.getElementById('resumePopup').style.display = 'none';
        }

        document.getElementById('downloadBtn').onclick = function() {
            const link = document.createElement('a');
            link.href = 'path/to/your/resume.pdf'; // Change this to the actual PDF link
            link.download = 'Resume.pdf';
            link.click();
            closePopup();
        };

        document.getElementById('contactBtn').onclick = function() {
            window.location.href = 'mailto:idevprakaash@gmail.com';
            closePopup();
        };

        // Show popup after 1.5 minutes
        setTimeout(showPopup, 90 * 1000);
    </script>
</body>
</html>
